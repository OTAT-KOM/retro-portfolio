<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>About</title>
    <link rel="stylesheet" href="https://unpkg.com/98.css">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Courier+Prime&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #9e5bdb;  
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

       .desktop-link {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 80px;
            text-align: center;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .desktop-link img {
            width: 48px;
            height: 48px;
            margin-bottom: 5px;
            image-rendering: pixelated;
        }

        .desktop-link div {
            color: white;
            font-family: 'Pixelated MS Sans Serif', Arial;
            text-shadow: 1px 1px 0px black;
        }

        .page-window {
            width: 700px;
            max-width: 90vw;
            height: auto;
            display: flex;
            flex-direction: column;
        }

        .window-body {
            padding-top: 10px;
            padding-bottom: 10px;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

         
        menu[role=tablist] {
            display: flex;
            margin: 0 0 -2px 0;
            padding-left: 3px;
            position: relative;
            z-index: 1;
        }

        .tab-link {
            list-style: none;
            padding: 3px 8px;
            margin-right: 2px;
            background: #c0c0c0;
            cursor: pointer;
            border-top: 1px solid #fff;
            border-left: 1px solid #fff;
            border-right: 1px solid #808080;
            border-bottom: 1px solid #808080;
            box-shadow: 1px 1px 0 #000;
            border-top-left-radius: 3px;
            border-top-right-radius: 3px;
            user-select: none;
        }

        .tab-link[aria-selected="true"] {
 
            border-bottom: none;
            box-shadow: 1px 0 0 #000, 1px 0 0 #808080;  
            z-index: 2;
            position: relative;
            border-top: 1px solid #fff;
            border-left: 1px solid #fff;
            border-right: 1px solid #808080;
        }

         
        .tab-link[aria-selected="true"]::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-top: 1px solid #fff;
            border-left: 1px solid #fff;
            border-top-left-radius: 3px;
            border-top-right-radius: 3px;
            pointer-events: none;
        }

        .tab-content-container {
            border-top: 1px solid #fff;
            border-left: 1px solid #fff;
            border-right: 1px solid #808080;
            border-bottom: 1px solid #808080;
            box-shadow: 1px 1px 0 #000;
            padding: 20px;
            background: #c0c0c0;
            flex: 1;
            overflow-y: auto;
            position: relative;
            z-index: 0;
        }

        .tab-content {
            display: none;
            height: 100%;
        }

        .tab-content.active {
            display: block;
        }

         
        .summary-layout {
            display: flex;
            gap: 30px;
            height: 100%;
            padding: 20px;
            align-items: flex-start;
        }

        .summary-image-container {
            flex-shrink: 0;
            width: 220px;
            height: 220px;
            border: none;
            background: transparent;
            display: flex;
            align-items: flex-start;
            justify-content: center;
        }

        .summary-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
        }

        .summary-text {
            flex: 1;
            font-family: 'Courier Prime', 'Courier New', monospace;
            overflow-y: auto;
            color: #000;
        }

        .summary-title {
            font-weight: bold;
            font-size: 1.4em;
            margin-top: 0;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-family: 'Courier Prime', 'Courier New', monospace;
        }

        .summary-desc {
            font-size: 0.9em;
            line-height: 1.6;
            text-align: left;
        }

        /* Footer Buttons */
        .footer-buttons {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: auto;
            padding: 15px 40px; /* Add side padding */
        }

        .footer-buttons button {
            min-width: 120px;
            font-weight: bold;
            font-family: 'Courier Prime', 'Courier New', monospace;
            font-size: 14px;
            height: 35px;
        }

         
        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            align-content: center;
            height: 100%;
            text-align: center;
        }

        .contact-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            padding: 10px;
            border: 1px dotted transparent;
        }

        .contact-item:hover {
            border: 1px dotted #000;
            background-color: rgba(255, 255, 255, 0.5);
        }

        .contact-item img {
            width: 48px;
            height: 48px;
            margin-bottom: 10px;
        }

        .contact-item span {
            font-family: 'Courier Prime', monospace;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            /* Hide desktop elements */
            .desktop-link, 
            .page-window,
            .desktop-icons,
            .recycle-bin,
            body::before { 
                display: none !important;
            }

            body {
                background: #000 !important;
                overflow: hidden;
                align-items: flex-start; /* Align top */
                font-family: 'VT323', monospace;
                padding: 0 !important; /* Force reset padding */
                /* Use dynamic viewport height for mobile browsers (iOS Safari address bar) */
                height: 100dvh;
                min-height: 100dvh;
            }

            /* Top Bar */
            .nokia-top-bar {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0 8px;
                background: #000;
                z-index: 10;
                padding-top: env(safe-area-inset-top);
                height: calc(44px + env(safe-area-inset-top));
                border-bottom: 1px solid #222; /* Subtle separation */
                box-sizing: border-box;
                margin-top: 0;
            }
        }

    </style>
</head>
<body>
    <div class="desktop-link" onclick="window.location.href='index.html'">
        <img src="images/icons/directory_open_file_mydocs_2k-4.png" alt="Desktop">
        <div>Desktop</div>
    </div>

    <!-- Mobile Menu Container (Nokia 5800 Grid Style) -->
    <div id="mobile-menu">
        <!-- Nokia Top Bar -->
        <div class="nokia-top-bar">
            <div class="bar-left">
                <div class="signal-bars">
                    <span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                </div>
                <div class="menu-title">Menu</div>
            </div>
            <div class="bar-right">
                <div class="nokia-clock" id="nokia-clock">18:37</div>
                <div class="battery-bars">
                    <span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                </div>
            </div>
        </div>

        <!-- Nokia Grid Content -->
        <div class="nokia-menu-grid">
            <a href="pictures.html" class="nokia-icon-item">
                <img src="images/icons/gallery.png" alt="Pictures">
                <span>Pictures</span>
            </a>
            <a href="agenda.html" class="nokia-icon-item">
                <img src="images/icons/agenda.png" alt="Agenda">
                <span>Agenda</span>
            </a>
            <a href="videoprojects.html" class="nokia-icon-item">
                <img src="images/icons/vid project.png" alt="Video Project">
                <span>Video Project</span>
            </a>
            
            <a href="#" class="nokia-icon-item" onclick="goToContact(event)">
                <img src="images/icons/contact.png" alt="Contact OTAT">
                <span>Contact OTAT</span>
            </a>
            <a href="listen.html" class="nokia-icon-item">
                <img src="images/icons/listen.png" alt="Listen">
                <span>Listen</span>
            </a>
            <a href="#" class="nokia-icon-item" onclick="showMobileAbout(event)">
                <img src="images/icons/about otat.png" alt="About OTAT">
                <span>About OTAT</span>
            </a>
            
            <a href="note.html" class="nokia-icon-item">
                <img src="images/icons/note.png" alt="Note">
                <span>Note</span>
            </a>
        </div>

        <!-- Custom Scrollbar Indicator (Visual Only) -->
        <div class="nokia-scrollbar-track">
            <div class="nokia-scrollbar-thumb"></div>
        </div>

        <!-- Nokia Bottom Softkeys -->
        <div class="nokia-bottom-bar">
            <button class="softkey-btn">Menu</button>
            <button class="softkey-btn">Exit</button>
        </div>
    </div>

    <div class="window page-window" id="main-window">
        <!-- Mobile iOS Header (Hidden on Desktop) -->
        <div class="mobile-ios-header" style="display:none; height: 44px; background: linear-gradient(to bottom, #b0bccd 0%, #889bb3 50%, #8195af 51%, #6d84a2 100%); border-bottom: 1px solid #2d3642; align-items: center; justify-content: space-between; padding: 0 5px; box-sizing: border-box; padding-top: env(safe-area-inset-top); height: calc(44px + env(safe-area-inset-top)); flex-shrink: 0;">
            <button onclick="closeMainWindow()" style="background: linear-gradient(to bottom, #6d84a2 0%, #3d526d 50%, #354a65 51%, #2b3f59 100%); border: 1px solid #24354b; border-radius: 4px; color: white; font-weight: bold; padding: 6px 12px; font-size: 13px; text-shadow: 0 -1px 0 rgba(0,0,0,0.5); cursor: pointer; box-shadow: inset 0 1px 0 rgba(255,255,255,0.2), 0 1px 0 rgba(255,255,255,0.2);">Back</button>
            <div style="color: white; font-weight: bold; font-size: 20px; text-shadow: 0 -1px 0 rgba(0,0,0,0.5); padding-top: env(safe-area-inset-top);">Contacts</div>
            <div style="width: 50px;"></div>
        </div>

        <div class="title-bar">
            <div class="title-bar-text">About</div>
            <div class="title-bar-controls">
                <button aria-label="Minimize"></button>
                <button aria-label="Maximize"></button>
                <button aria-label="Close" onclick="closeMainWindow()"></button>
            </div>
        </div>
        <div class="window-body">
            <menu role="tablist">
                <li role="tab" aria-selected="true" class="tab-link" data-tab="summary" >Summary</li>
                <li role="tab" class="tab-link" data-tab="contact" >Contact details</li>
            </menu>
            
            <div class="tab-content-container">
                
                <div class="tab-content active" id="tab-content-summary">
                    <div class="summary-layout">
                        <div class="summary-image-container">
                            <img id="about-image" src="" alt="Profile" class="summary-image">
                        </div>
                        <div class="summary-text">
                            <h2 id="about-title" class="summary-title">Loading...</h2>
                            <p id="about-text" class="summary-desc"></p>
                        </div>
                    </div>
                </div>

                
                <div class="tab-content" id="tab-content-contact">
                    <div class="contact-grid">
                        <p style="width: 100%; text-align: center;">Loading contact details...</p>
                    </div>
                </div>
            </div>

            <div class="footer-buttons">
                <button id="btn-insta">Instagram</button>
                <button id="btn-twitter">Twitter</button>
                <button id="btn-tiktok">TikTok</button>
            </div>
        </div>
    </div>

    <!-- Mobile Contact App Container (Agenda Style) -->
    <div id="mobile-contact-app" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 2000; flex-direction: column; font-family: sans-serif;">
        <!-- Header (Dark Theme) -->
        <div style="height: 44px; background: linear-gradient(to bottom, #444 0%, #222 50%, #111 51%, #000 100%); border-bottom: 1px solid #333; display: flex; align-items: center; justify-content: space-between; padding: 0 8px; box-sizing: border-box; padding-top: env(safe-area-inset-top); height: calc(44px + env(safe-area-inset-top)); flex-shrink: 0;">
            <button onclick="closeMobileContact()" style="background: linear-gradient(to bottom, #444 0%, #222 50%, #111 51%, #000 100%); border: 1px solid #666; border-radius: 4px; color: white; font-weight: bold; padding: 6px 12px; font-size: 13px; text-shadow: 0 -1px 0 rgba(0,0,0,0.5); cursor: pointer; box-shadow: inset 0 1px 0 rgba(255,255,255,0.2), 0 1px 0 rgba(255,255,255,0.2);">Back</button>
            <div style="color: white; font-weight: bold; font-size: 20px; text-shadow: 0 -1px 0 rgba(0,0,0,0.5); padding-top: env(safe-area-inset-top);">Contact</div>
            <div style="width: 50px;"></div>
        </div>

        <!-- Content Area -->
        <div id="contact-container" style="flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 15px; color: white;">
            <div style="text-align: center; margin-top: 20px;">Loading contacts...</div>
        </div>

        <!-- Bottom Bar (Nokia S60 Style Dark) -->
        <div class="nokia-bottom-bar" style="position: relative; bottom: auto; left: auto;">
             <button class="softkey-btn" onclick="closeMobileContact()">Menu</button>
             <button class="softkey-btn" onclick="closeMobileContact()">Back</button>
        </div>
    </div>

    <!-- Nokia SMS Interface Container (S60 Dark Theme) -->
    <div id="ios-sms-app" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 2000; flex-direction: column; font-family: sans-serif; color: white;">
        <!-- Nokia Top Bar (Dark Theme) -->
        <div class="nokia-top-bar" style="background: #000; border-bottom: 1px solid #333; color: white;">
             <div class="bar-left">
                <div class="signal-bars">
                    <span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                </div>
                <div class="menu-title" style="color: white; font-size: 18px; margin-left: 10px;">OTAT</div>
            </div>
            <div class="bar-right">
                <div class="nokia-clock" style="color: white; font-weight: bold;">18:37</div>
                <div class="battery-bars">
                    <span></span><span></span><span></span><span></span><span></span><span></span><span></span>
                </div>
            </div>
        </div>

        <!-- Content Area (Conversation View) -->
        <div id="sms-container" style="flex: 1; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 10px; color: white; background: #000;">
            <!-- Content injected via JS -->
        </div>

        <!-- Input Area (Fixed at Bottom) -->
        <div style="height: 50px; background: #222; border-top: 1px solid #333; display: flex; align-items: center; padding: 0 10px; flex-shrink: 0;">
            <input type="text" placeholder="Type message" style="flex: 1; height: 32px; background: #444; border: 1px solid #555; border-radius: 16px; color: white; padding: 0 12px; outline: none; font-size: 16px;">
            <button onclick="showContactAlert()" style="margin-left: 10px; background: #0044cc; border: none; color: white; border-radius: 16px; padding: 6px 14px; font-weight: bold; cursor: pointer;">Send</button>
        </div>

        <!-- Bottom Bar (Nokia S60 Style Dark) -->
        <div class="nokia-bottom-bar" style="position: relative; bottom: auto; left: auto;">
             <button class="softkey-btn" onclick="showContactAlert()">Options</button>
             <button class="softkey-btn" onclick="closeMobileAbout()">Back</button>
        </div>
    </div>

    <!-- Custom iOS Alert Overlay -->
    <div id="ios-alert" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; z-index:9999; background:rgba(0,0,0,0.4); align-items:center; justify-content:center; font-family: Helvetica, Arial, sans-serif;">
       <div style="background:rgba(255,255,255,0.95); width:270px; border-radius:15px; text-align:center; backdrop-filter:blur(10px);">
           <div style="padding:20px 15px;">
               <h3 style="margin:0 0 5px; font-size:17px; font-weight:600; color:black;">Contact OTAT</h3>
               <p style="margin:0; font-size:13px; color:black;">Would you like to open the contact details?</p>
           </div>
           <div style="border-top:1px solid #b5b5b5; display:flex;">
               <button onclick="closeAlert()" style="flex:1; background:transparent; border:none; border-right:1px solid #b5b5b5; padding:12px; font-size:17px; color:#007aff; cursor:pointer; border-bottom-left-radius: 15px;">Cancel</button>
               <button onclick="goToContact()" style="flex:1; background:transparent; border:none; padding:12px; font-size:17px; font-weight:600; color:#007aff; cursor:pointer; border-bottom-right-radius: 15px;">Open</button>
           </div>
       </div>
    </div>

    <script src="js/main.js"></script>
    <script>
        async function showMobileAbout(e) {
            if (e) e.preventDefault();
            const mobileMenu = document.getElementById('mobile-menu');
            if(mobileMenu) mobileMenu.style.display = 'none';
            
            const smsApp = document.getElementById('ios-sms-app');
            smsApp.style.display = 'flex';
            
            const container = document.getElementById('sms-container');
            
            // Check if already loaded
            if (container.getAttribute('data-loaded') === 'true') {
                 return;
            }
            
            container.innerHTML = '<div style="text-align: center; color: #888; margin-top: 20px;">Loading...</div>';

            try {
                const response = await fetch('data/about.json?t=' + Date.now());
                const data = await response.json();
                
                // Construct Nokia S60 Conversation Style Content
                
                // 1. User Message (Right Aligned)
                const userMsg = `
                    <div style="align-self: flex-end; max-width: 80%; display: flex; flex-direction: column; align-items: flex-end;">
                        <div style="background: #0044cc; color: white; padding: 8px 12px; border-radius: 6px; font-size: 16px; box-shadow: 0 1px 2px rgba(0,0,0,0.5);">
                            Tell me about OTAT?
                        </div>
                        <div style="font-size: 10px; color: #888; margin-top: 2px;">09:41 AM</div>
                    </div>
                `;

                // 2. OTAT Response (Left Aligned)
                const socialLinks = data.social_media ? data.social_media.map(item => `
                    <a href="${item.url}" target="_blank" style="color: #4cd964; text-decoration: underline; display: inline-block; margin-right: 10px;">${item.name}</a>
                `).join('') : '';

                const otatMsg = `
                    <div style="align-self: flex-start; max-width: 85%; display: flex; flex-direction: column; align-items: flex-start;">
                        <div style="background: #333; color: white; padding: 10px; border-radius: 6px; font-size: 16px; box-shadow: 0 1px 2px rgba(0,0,0,0.5); width: 100%; box-sizing: border-box;">
                            
                            ${data.summary_image ? `
                            <div style="margin-bottom: 10px;">
                                <img src="${data.summary_image}" style="width: 100%; height: auto; display: block; border-radius: 2px;">
                            </div>
                            ` : ''}
                            
                            <div style="margin-bottom: 10px; line-height: 1.4;">
                                <strong>${data.summary_title || 'About OTAT'}</strong><br>
                                ${data.summary_text || ''}
                            </div>
                            
                            <div style="border-top: 1px solid #555; padding-top: 8px; font-size: 14px;">
                                ${socialLinks}
                                ${data.contact_email ? `<br><a href="mailto:${data.contact_email}" style="color: #4cd964; display:inline-block; margin-top:5px;">${data.contact_email}</a>` : ''}
                            </div>
                        </div>
                        <div style="font-size: 10px; color: #888; margin-top: 2px; margin-left: 2px;">09:42 AM</div>
                    </div>
                `;

                container.innerHTML = userMsg + otatMsg;
                
                container.setAttribute('data-loaded', 'true');

            } catch(err) {
                container.innerHTML = '<div style="text-align: center; color: red;">Error loading content.</div>';
                console.error(err);
            }
        }

        function closeMobileAbout() {
            document.getElementById('ios-sms-app').style.display = 'none';
            document.getElementById('mobile-menu').style.display = 'flex'; 
        }

        // --- Notification Logic ---
        function showContactAlert() {
            document.getElementById('ios-alert').style.display = 'flex';
        }

        function closeAlert() {
            document.getElementById('ios-alert').style.display = 'none';
        }

        function goToContact(e) {
            if (e) e.preventDefault();
            closeAlert();
            // Hide other apps
            document.getElementById('ios-sms-app').style.display = 'none';
            document.getElementById('mobile-menu').style.display = 'none';
            
            const contactApp = document.getElementById('mobile-contact-app');
            contactApp.style.display = 'flex';
            
            // Load contact info
            loadMobileContact();
        }

        function closeMobileContact() {
            document.getElementById('mobile-contact-app').style.display = 'none';
            document.getElementById('mobile-menu').style.display = 'flex';
        }

        async function loadMobileContact() {
            const container = document.getElementById('contact-container');
            
            try {
                const response = await fetch('data/about.json?t=' + Date.now());
                const data = await response.json();
                
                let socialLinks = '';
                if (data.social_media && Array.isArray(data.social_media)) {
                    socialLinks = data.social_media.map(item => `
                        <div onclick="window.open('${item.url}', '_blank')" style="background: #111; border: 1px solid #333; border-radius: 8px; padding: 15px; display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                            <img src="${item.icon || 'images/icons/directory_favorites-2.png'}" style="width: 32px; height: 32px; margin-right: 15px;">
                            <span style="font-size: 16px; font-weight: bold; font-family: 'Courier Prime', monospace;">${item.name}</span>
                            <div style="flex: 1; text-align: right; color: #666;">›</div>
                        </div>
                    `).join('');
                }

                let emailBlock = '';
                if (data.contact_email) {
                    emailBlock = `
                        <div onclick="window.location.href='mailto:${data.contact_email}'" style="background: #111; border: 1px solid #333; border-radius: 8px; padding: 15px; display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                            <img src="images/icons/outlook_express-4.png" style="width: 32px; height: 32px; margin-right: 15px;">
                            <div style="display: flex; flex-direction: column;">
                                <span style="font-size: 16px; font-weight: bold; font-family: 'Courier Prime', monospace;">Email Me</span>
                                <span style="font-size: 12px; color: #888; font-family: 'Courier Prime', monospace;">${data.contact_email}</span>
                            </div>
                            <div style="flex: 1; text-align: right; color: #666;">›</div>
                        </div>
                    `;
                }

                container.innerHTML = `
                    <div style="padding-bottom: 20px;">
                        <h2 style="color: white; font-family: 'Courier Prime', monospace; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px;">Get in Touch</h2>
                        ${socialLinks}
                        ${emailBlock}
                    </div>
                `;

            } catch (e) {
                container.innerHTML = '<div style="text-align:center; padding:20px;">Error loading contacts.</div>';
            }
        }

        function closeMainWindow() {
            const mainWindow = document.getElementById('main-window');
            if (mainWindow) {
                mainWindow.classList.remove('mobile-view');
                // Show Mobile Menu
                document.getElementById('mobile-menu').style.display = 'flex';
            }
        }

        async function loadExtraContactLogic() {
            try {
                // Check URL params to switch tabs
                const params = new URLSearchParams(window.location.search);
                if (params.get('tab') === 'contact') {
                    const contactTab = document.querySelector('.tab-link[data-tab="contact"]');
                    if (contactTab) {
                        // Simulate click to switch
                        contactTab.click();
                    }
                }

                const response = await fetch('data/about.json?t=' + Date.now());
                if (!response.ok) return;
                const data = await response.json();
                
                const showEmailAlert = (email) => {
                    const overlay = document.createElement('div');
                    Object.assign(overlay.style, {
                        position: 'fixed', top: 0, left: 0, width: '100%', height: '100%',
                        backgroundColor: 'rgba(0,0,0,0.1)', zIndex: 9998
                    });
                    
                    const win = document.createElement('div');
                    win.className = 'window';
                    Object.assign(win.style, {
                        position: 'fixed', top: '50%', left: '50%', transform: 'translate(-50%, -50%)',
                        zIndex: 9999, width: '300px'
                    });
                    
                    win.innerHTML = `
                        <div class="title-bar">
                            <div class="title-bar-text">Email Address</div>
                            <div class="title-bar-controls">
                                <button aria-label="Close"></button>
                            </div>
                        </div>
                        <div class="window-body">
                            <p style="text-align: center; margin: 20px 0; user-select: text; font-size: 14px;">${email}</p>
                            <div style="display: flex; justify-content: center; gap: 10px; margin-bottom: 10px;">
                                <button id="btn-copy-email" style="min-width: 70px;">Copy</button>
                                <button id="btn-close-alert" style="min-width: 70px;">OK</button>
                            </div>
                        </div>
                    `;
                    
                    document.body.appendChild(overlay);
                    document.body.appendChild(win);
                    
                    const close = () => { win.remove(); overlay.remove(); };
                    win.querySelector('[aria-label="Close"]').onclick = close;
                    win.querySelector('#btn-close-alert').onclick = close;
                    
                    const copyBtn = win.querySelector('#btn-copy-email');
                    copyBtn.onclick = () => {
                        navigator.clipboard.writeText(email).then(() => {
                            copyBtn.textContent = 'Copied!';
                            setTimeout(() => copyBtn.textContent = 'Copy', 2000);
                        });
                    };
                };

                // Clear existing items
                const grid = document.querySelector('.contact-grid');
                if (grid) {
                    grid.innerHTML = '';
                    
                    // Add social media items
                    if (data.social_media && Array.isArray(data.social_media)) {
                        data.social_media.forEach(item => {
                            const div = document.createElement('div');
                            div.className = 'contact-item';
                            div.onclick = () => window.open(item.url, '_blank');
                            
                            // Handle missing icon
                            const iconSrc = item.icon || 'images/icons/directory_favorites-2.png';
                            
                            div.innerHTML = `
                                <img src="${iconSrc}" alt="${item.name}">
                                <span>${item.name}</span>
                            `;
                            grid.appendChild(div);
                        });
                    }

                    // Add Email button if exists
                    if (data.contact_email) {
                        const emailDiv = document.createElement('div');
                        emailDiv.className = 'contact-item';
                        emailDiv.onclick = () => showEmailAlert(data.contact_email);
                        emailDiv.innerHTML = `
                            <img src="images/icons/outlook_express-4.png" alt="Email">
                            <span>Email Me</span>
                        `;
                        grid.appendChild(emailDiv);
                    }
                }

            } catch(e) { console.log(e); }
        }
        
         
        document.addEventListener('DOMContentLoaded', () => {
            loadExtraContactLogic();
            
            // On Mobile: Open About (SMS App) ONLY on first visit of the session
            if (window.innerWidth <= 768) {
                const hasSeenIntro = sessionStorage.getItem('hasSeenIntro');
                
                if (!hasSeenIntro) {
                    showMobileAbout();
                    sessionStorage.setItem('hasSeenIntro', 'true');
                }
            }
        });
    </script>
</body>
</html>